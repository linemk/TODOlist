# todo-list-project

Это веб-сервер для планирования задач с хранением данных в базе SQLite. 
С помощью приложения Вы можете:

•	Добавлять, просматривать, обновлять и удалять задачи.  
•	Указывать дату в формате `YYYYMMDD`.  
•	Задавать комментарий, правило повторения (ежегодно, каждые N дней, по конкретным дням недели, дням месяца) и отмечать выполнение задачи.  
•	Ввести поисковую строку для фильтрации задач по заголовку/комментарию, а также выбирать задачи на конкретную дату.  
•	Аутентифицироваться по паролю, если он установлен в переменной окружения TODO_PASSWORD и получать защищенный доступ на все API маршруты.

Выполненные задания со звёздочкой (выполнены все): 
1.	Настраиваемый порт через переменную окружения `TODO_PORT`.
2.	Путь к базе данных через переменную окружения `TODO_DBFILE` можно определить, где хранится файл SQLite.
3.	Расширенные правила повторения по дням недели и по дням месяца (форматы w ... и m ...) + возможность настраивать за 1/2 дня до конца месяца.
4.	Поле поиска в браузере: Фильтрация задач по словам в заголовке/комментарии или по конкретной дате формата `DD.MM.YYYY`.
5.	Аутентификация: Если установлена переменная окружения TODO_PASSWORD, доступ к планировщику защищён паролем, а также использование промежуточного слоя в виде `Middleware`.
6.  Создание и запуск Docker образа 

## Описание проекта

Веб-сервер предоставляет API-методы для CRUD-операций над задачами (Create, Read, Update, Delete), а также поле поиска.

Инструкция по запуску кода локально
1.	Склонируйте репозиторий:

git clone git@github.com:linemk/TODOlist.git

2.	Подготовьте переменные окружения (при желании):  
	•	Создайте файл .env (или используйте env.example) со следующим содержимым:

`TODO_PORT=7540  
TODO_DBFILE=./database/scheduler.db  
JWT_SECRET=secret_key  
TODO_PASSWORD=12345`


   • Либо экспортируйте их напрямую в среду (например, export TODO_PORT=7540).

	3.	Установите Go-зависимости:

go mod tidy

	4.	Запустите приложение:

go run cmd/service/main.go

Если вы указали переменные окружения, сервер подхватит соответствующие значения.
По умолчанию слушается порт 7540. Перейдите в браузер по адресу:

http://localhost:7540/

для проверки работы приложения.

### Инструкция по запуску тестов

В проекте есть пакет tests, где настройками служит файл tests/settings.go. Пример содержимого:

package tests

var Port = 7540
var DBFile = "../scheduler.db"
var FullNextDate = true
var Search = true
var Token = ``

	•	Port: Порт, на котором работает сервер.
	•	DBFile: Путь к базе данных для тестов.
	•	Token: Если ваше приложение поддерживает аутентификацию по токену, укажите его здесь.

Чтобы запустить тесты, перейдите в корень проекта и выполните:

go test ./tests

Если тесты зависят от базы, убедитесь, что DBFile указывает на корректный SQLite-файл.

### Инструкция по сборке и запуску проекта через Docker (с macOS чип m1)
1.	Соберите Docker-образ (находясь в корневой директории проекта):

docker build -t todo-list-app .


	2.	Запустите контейнер:

docker run -d \
-p 7540:7540 \
-e TODO_PORT=7540 \
-e TODO_DBFILE=/app/database/scheduler.db \
-e JWT_SECRET=secret_key \
-e TODO_PASSWORD=12345 \
-v "${PWD}/database:/app/database" \
--name my-todo-container \
todo-list-app

	3.	Проверка: В браузере откройте:

http://localhost:7540/

Приложение должно работать как локально.

Примеры использования
•	Добавление задачи: POST /api/tasks
•	Просмотр списка задач: GET /api/tasks
•	Поиск задач: GET /api/tasks?search=08.02.2024
•	Обновление задачи: PUT /api/tasks/{id}
•	Удаление задачи: DELETE /api/tasks/{id}
•	Отметка выполнения: POST /api/tasks/{id}/complete

## Заключение

todo-list-project — это веб-сервер для планирования задач на Go с использованием SQLite.
•	Все задания со звёздочкой (переменные окружения, расширенные правила повторения, поиск, аутентификация) реализованы.
•	Код можно запускать локально (go run cmd/service/main.go) или упаковать в Docker-образ, что удобно для деплоя.

P.s. потерял при разработке много нервов, надеюсь они восстановятся :) 